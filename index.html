<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smal Empire | CMS & Casino Elite</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&family=Orbitron:wght@700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --bg: #050a0f; --surface: #0f1720; --accent: #00e701;
            --gold: #ffcc00; --text: #b1bad3; --border: rgba(255,255,255,0.1);
        }
        * { box-sizing: border-box; font-family: 'Plus Jakarta Sans', sans-serif; transition: 0.3s; }
        body { background: var(--bg); color: white; margin: 0; display: flex; height: 100vh; overflow: hidden; }

        /* --- UI COMPONENTS --- */
        .sidebar { width: 280px; background: var(--surface); border-right: 1px solid var(--border); display: flex; flex-direction: column; z-index: 100; }
        .main { flex: 1; overflow-y: auto; padding: 40px; background: radial-gradient(circle at top right, #1a2c38, #050a0f); }
        .nav-item { padding: 15px 25px; cursor: pointer; color: var(--text); font-weight: 600; display: flex; align-items: center; gap: 12px; border-left: 4px solid transparent; }
        .nav-item:hover, .nav-item.active { background: rgba(0,231,1,0.05); color: white; border-left: 4px solid var(--accent); }
        
        .card { background: rgba(15,23,32,0.8); border: 1px solid var(--border); border-radius: 20px; padding: 25px; backdrop-filter: blur(10px); }
        .btn { padding: 12px 20px; border: none; border-radius: 10px; font-weight: 800; cursor: pointer; text-transform: uppercase; width: 100%; margin-top: 10px; }
        .btn-accent { background: var(--accent); color: black; }
        .btn-gold { background: var(--gold); color: black; }
        
        input, textarea, select { width: 100%; padding: 12px; background: #050a0f; border: 1px solid var(--border); border-radius: 8px; color: white; margin-bottom: 10px; outline: none; }
        input:focus { border-color: var(--accent); }

        /* --- AUTH --- */
        #auth-screen { position: fixed; inset: 0; background: var(--bg); z-index: 1000; display: flex; align-items: center; justify-content: center; }
        
        /* --- ROULETTE --- */
        #box-modal { position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 500; display: none; align-items: center; justify-content: center; flex-direction: column; }
        .window { width: 500px; height: 140px; border: 2px solid var(--gold); overflow: hidden; position: relative; background: #1a2c38; border-radius: 12px; }
        .track { display: flex; position: absolute; left: 0; transition: transform 5s cubic-bezier(0.1, 0, 0, 1); }
        .item-r { min-width: 140px; height: 140px; display: flex; align-items: center; justify-content: center; border-right: 1px solid var(--border); font-weight: 800; flex-direction: column; }
        .line { position: absolute; left: 50%; top: 0; bottom: 0; width: 3px; background: var(--gold); z-index: 10; transform: translateX(-50%); }

        /* --- GRID --- */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }
    </style>
</head>
<body>

<div id="auth-screen">
    <div class="card" style="width: 350px; text-align: center;">
        <h1 style="font-family:'Orbitron'; color:var(--accent);">SMAL EMPIRE</h1>
        <input type="text" id="au-u" placeholder="Usuario">
        <input type="password" id="au-p" placeholder="Contrase√±a">
        <button class="btn btn-accent" onclick="login()">ACCEDER</button>
    </div>
</div>

<aside class="sidebar">
    <div style="padding: 40px 25px; text-align: center;">
        <div id="u-ava" style="width:70px; height:70px; background:var(--accent); border-radius:20px; margin: 0 auto 15px; display:flex; align-items:center; justify-content:center; color:black; font-weight:900; font-size:1.8rem; box-shadow: 0 10px 20px rgba(0,231,1,0.2);">?</div>
        <h3 id="u-nam" style="margin:0;">Invitado</h3>
        <p id="u-mon" style="color:var(--gold); font-weight:800; margin:5px 0;">ü™ô 0.00</p>
    </div>
    <div id="menu-items">
        <div class="nav-item active" onclick="nav('home')">üè† Inicio</div>
        <div class="nav-item" onclick="nav('boxes')">üéÅ Cajas Fuertes</div>
        <div class="nav-item" onclick="nav('games')">üéÆ Juegos Elite</div>
        <div class="nav-item" onclick="nav('inv')">üéí Mi Inventario</div>
    </div>
    <div style="flex:1"></div>
    <div id="adm-btn" class="nav-item" style="display:none; color:var(--gold); border-top:1px solid var(--border);" onclick="nav('admin')">üõ† PANEL MAESTRO</div>
</aside>

<main class="main">
    <div id="view-home" class="view">
        <h1 style="font-family:'Orbitron'; font-size: 2.5rem;">BIENVENIDO AL <span style="color:var(--accent)">IMPERIO</span></h1>
        <p>Selecciona una categor√≠a en el men√∫ lateral para empezar a ganar.</p>
        <div class="grid" id="home-featured"></div>
    </div>

    <div id="view-dynamic" class="view" style="display:none">
        <h1 id="dyn-title" style="font-family:'Orbitron';">Cargando...</h1>
        <div id="dyn-content" class="card"></div>
    </div>

    <div id="view-boxes" class="view" style="display:none">
        <h2>Mystery Boxes</h2>
        <div class="grid" id="box-grid"></div>
    </div>

    <div id="view-games" class="view" style="display:none">
        <div class="grid">
            <div class="card">
                <h3>üí£ MINAS</h3>
                <button class="btn btn-accent" onclick="alert('Iniciando Minas...')">JUGAR AHORA</button>
            </div>
            <div class="card">
                <h3>üöÄ CRASH</h3>
                <button class="btn btn-accent" onclick="alert('Iniciando Crash...')">APOSTAR</button>
            </div>
        </div>
    </div>

    <div id="view-inv" class="view" style="display:none">
        <h2>Tu Inventario</h2>
        <div class="grid" id="inv-grid"></div>
    </div>

    <div id="view-admin" class="view" style="display:none">
        <h1 style="color:var(--gold); font-family:'Orbitron';">üõ† CONFIGURACI√ìN GLOBAL</h1>
        
        <div class="grid">
            <div class="card">
                <h3>üìÅ Crear Nuevo Men√∫</h3>
                <input type="text" id="new-menu-name" placeholder="Nombre (ej: Reglas, VIP)">
                <textarea id="new-menu-content" placeholder="Contenido de la p√°gina (HTML soportado)" rows="4"></textarea>
                <button class="btn btn-accent" onclick="adminAddMenu()">CREAR SECCI√ìN</button>
            </div>

            <div class="card">
                <h3>üì¶ Nueva Mystery Box</h3>
                <input type="text" id="new-box-name" placeholder="Nombre de la Caja">
                <input type="number" id="new-box-price" placeholder="Precio">
                <textarea id="new-box-items" placeholder="Premios (uno por l√≠nea)" rows="4"></textarea>
                <button class="btn btn-gold" onclick="adminAddBox()">PUBLICAR CAJA</button>
            </div>

            <div class="card">
                <h3>ü™ô Enviar Tokens</h3>
                <input type="text" id="target-user" placeholder="Nombre Usuario">
                <input type="number" id="target-amount" placeholder="Cantidad">
                <button class="btn btn-accent" onclick="adminGift()">ENVIAR SALDO</button>
            </div>
        </div>
    </div>
</main>

<div id="box-modal">
    <h2 id="roll-status" style="color:var(--gold); font-family:'Orbitron';">DESBLOQUEANDO...</h2>
    <div class="window">
        <div class="line"></div>
        <div id="roll-track" class="track"></div>
    </div>
</div>

<script>
    // --- ESTADO INICIAL ---
    let state = {
        u: "", bal: 2000, inv: [],
        boxes: [{n: "Caja Oro", p: 100, i: ["$10 PayPal", "Basura", "VIP", "500 TKN"]}],
        customMenus: []
    };

    function login() {
        let u = document.getElementById('au-u').value;
        let p = document.getElementById('au-p').value;
        if(!u) return;

        state.u = u;
        if(u === "SmalAdmin" && p === "admin123") document.getElementById('adm-btn').style.display = 'flex';
        
        document.getElementById('auth-screen').style.display = 'none';
        document.getElementById('u-nam').innerText = u;
        document.getElementById('u-ava').innerText = u[0].toUpperCase();
        
        refreshUI();
    }

    function refreshUI() {
        document.getElementById('u-mon').innerText = "ü™ô " + state.bal.toFixed(2);
        renderBoxes();
    }

    function nav(view) {
        document.querySelectorAll('.view').forEach(v => v.style.display = 'none');
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        
        const target = document.getElementById('view-' + view);
        if(target) target.style.display = 'block';
        
        if(view === 'inv') renderInv();
    }

    // --- L√ìGICA DE MEN√öS MANUALES (ADMIN) ---
    function adminAddMenu() {
        let name = document.getElementById('new-menu-name').value;
        let content = document.getElementById('new-menu-content').value;

        if(!name || !content) return alert("Completa los datos");

        let id = "menu_" + Date.now();
        state.customMenus.push({id, name, content});

        // A√±adir al sidebar
        const sidebar = document.getElementById('menu-items');
        const div = document.createElement('div');
        div.className = 'nav-item';
        div.innerHTML = `‚≠ê ${name}`;
        div.onclick = () => showDynamic(name, content);
        sidebar.appendChild(div);

        alert("Secci√≥n '" + name + "' a√±adida al men√∫.");
    }

    function showDynamic(title, content) {
        nav('dynamic');
        document.getElementById('dyn-title').innerText = title.toUpperCase();
        document.getElementById('dyn-content').innerHTML = content;
    }

    // --- L√ìGICA DE CAJAS ---
    function adminAddBox() {
        let n = document.getElementById('new-box-name').value;
        let p = parseInt(document.getElementById('new-box-price').value);
        let i = document.getElementById('new-box-items').value.split('\n').filter(x => x.trim() !== "");

        if(n && p && i.length > 0) {
            state.boxes.push({n, p, i});
            alert("Caja guardada con √©xito.");
            renderBoxes();
        }
    }

    function renderBoxes() {
        const grid = document.getElementById('box-grid');
        grid.innerHTML = "";
        state.boxes.forEach((box, index) => {
            grid.innerHTML += `
                <div class="card" style="text-align:center">
                    <div style="font-size:3rem">üéÅ</div>
                    <h3>${box.n}</h3>
                    <p style="color:var(--accent); font-weight:900;">${box.p} TOKENS</p>
                    <button class="btn btn-accent" onclick="openBox(${index})">ABRIR</button>
                </div>`;
        });
    }

    function openBox(idx) {
        let box = state.boxes[idx];
        if(state.bal < box.p) return alert("Tokens insuficientes.");

        state.bal -= box.p;
        refreshUI();

        const modal = document.getElementById('box-modal');
        const track = document.getElementById('roll-track');
        track.innerHTML = "";
        track.style.transition = "none";
        track.style.transform = "translateX(0)";

        let items = [];
        for(let j=0; j<60; j++) {
            let item = box.i[Math.floor(Math.random() * box.i.length)];
            items.push(item);
            track.innerHTML += `<div class="item-r">üì¶<br><small>${item}</small></div>`;
        }

        modal.style.display = "flex";
        let win = items[55];

        setTimeout(() => {
            track.style.transition = "transform 5s cubic-bezier(0.1, 0, 0, 1)";
            track.style.transform = `translateX(-${(55 * 140) - 180}px)`;
        }, 50);

        setTimeout(() => {
            modal.style.display = "none";
            if(win !== "Basura") {
                state.inv.push(win);
                confetti();
                alert("üëë ¬°PREMIO! Ganaste: " + win);
            } else {
                alert("Caja vac√≠a... ¬°Suerte a la pr√≥xima!");
            }
        }, 5500);
    }

    // --- INVENTARIO Y TRADES ---
    function renderInv() {
        const grid = document.getElementById('inv-grid');
        grid.innerHTML = state.inv.length === 0 ? "<p>No tienes premios a√∫n.</p>" : "";
        state.inv.forEach((item, idx) => {
            grid.innerHTML += `
                <div class="card">
                    <h3>${item}</h3>
                    <button class="btn btn-gold" onclick="claim('${item}')">RECLAMAR WHATSAPP</button>
                </div>`;
        });
    }

    function claim(item) {
        window.open(`https://wa.me/593987749885?text=Hola SmalAdmin, soy ${state.u} y quiero reclamar mi premio: ${item}`);
    }

    function adminGift() {
        let amount = parseInt(document.getElementById('target-amount').value);
        state.bal += amount;
        refreshUI();
        alert("Saldo cargado exitosamente.");
    }

</script>
</body>
</html>
